<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotwife Rollenspiel Generator - Erweiterte Version</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #1a1a2e;
            color: #e6e6e6;
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .container {
            background-color: #16213e;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }
        
        h1 {
            color: #e94560;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            text-align: center;
            color: #8d99ae;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .disclaimer {
            background-color: #0f3460;
            border-left: 5px solid #e94560;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .warning {
            background-color: #5d0e0e;
            border-left: 5px solid #ff0000;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 5px;
            font-size: 0.9rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.8; }
            50% { opacity: 1; }
            100% { opacity: 0.8; }
        }
        
        .selection-area {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .category-card {
            background: linear-gradient(145deg, #0f3460, #1a3a6e);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(233, 69, 96, 0.3);
            border-color: #e94560;
        }
        
        .category-card.selected {
            border-color: #e94560;
            background: linear-gradient(145deg, #1a3a6e, #2a4a8e);
            box-shadow: inset 0 0 15px rgba(233, 69, 96, 0.2);
        }
        
        .category-title {
            color: #e94560;
            font-size: 1.3rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .difficulty {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .easy {
            background-color: #2e7d32;
            color: white;
        }
        
        .medium {
            background-color: #f57c00;
            color: white;
        }
        
        .hard {
            background-color: #c62828;
            color: white;
        }
        
        .explicit {
            background-color: #8a2be2;
            color: white;
        }
        
        .category-description {
            color: #b8c1ec;
            font-size: 0.95rem;
            margin-bottom: 15px;
        }
        
        .content-display {
            background: linear-gradient(145deg, #0f3460, #16213e);
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            min-height: 400px;
            display: none;
            border: 1px solid #1a3a6e;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .content-display.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .content-title {
            color: #e94560;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1a3a6e;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .option-list {
            list-style-type: none;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .option-item {
            background-color: rgba(26, 58, 110, 0.7);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #e94560;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
            border: 1px solid #2a4a8e;
        }
        
        .option-item:hover {
            background-color: rgba(42, 74, 142, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .option-item.explicit {
            border-left-color: #8a2be2;
            background-color: rgba(138, 43, 226, 0.1);
        }
        
        .option-item.explicit:hover {
            background-color: rgba(138, 43, 226, 0.2);
        }
        
        .option-text {
            margin-bottom: 15px;
            font-size: 1.05rem;
            line-height: 1.5;
        }
        
        .explicit-text {
            color: #ff7b9c;
            font-weight: bold;
        }
        
        .option-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-select {
            background-color: #e94560;
            color: white;
        }
        
        .btn-select:hover {
            background-color: #d13450;
            transform: scale(1.05);
        }
        
        .btn-back {
            background-color: #8d99ae;
            color: white;
        }
        
        .btn-back:hover {
            background-color: #7a8496;
        }
        
        .btn-next {
            background-color: #2e7d32;
            color: white;
        }
        
        .btn-next:hover {
            background-color: #276c2a;
        }
        
        .btn-explicit {
            background-color: #8a2be2;
            color: white;
        }
        
        .btn-explicit:hover {
            background-color: #7a1bd2;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #1a3a6e;
        }
        
        .history {
            background-color: #0f3460;
            border-radius: 10px;
            padding: 20px;
            margin-top: 25px;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .history-title {
            color: #e94560;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-item {
            padding: 8px 0;
            border-bottom: 1px dashed #1a3a6e;
            display: flex;
            justify-content: space-between;
        }
        
        .history-text {
            flex-grow: 1;
        }
        
        .history-time {
            color: #8d99ae;
            font-size: 0.8rem;
            min-width: 60px;
            text-align: right;
        }
        
        .reset-btn {
            background-color: #c62828;
            color: white;
            padding: 12px 25px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
        }
        
        .reset-btn:hover {
            background-color: #b71c1c;
            transform: scale(1.05);
        }
        
        .instructions {
            background-color: #0f3460;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.95rem;
            border-left: 5px solid #2e7d32;
        }
        
        .instructions h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .explicit-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .toggle-label {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background-color: #0f3460;
            border-radius: 15px;
            margin-right: 10px;
            transition: all 0.3s;
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background-color: #e94560;
            top: 2px;
            left: 2px;
            transition: all 0.3s;
        }
        
        input[type="checkbox"]:checked + .toggle-switch {
            background-color: #8a2be2;
        }
        
        input[type="checkbox"]:checked + .toggle-switch::after {
            transform: translateX(30px);
        }
        
        input[type="checkbox"] {
            display: none;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(15, 52, 96, 0.5);
            border-radius: 10px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            color: #e94560;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #8d99ae;
        }
        
        .saved-scenarios {
            margin-top: 30px;
            padding: 20px;
            background-color: #0f3460;
            border-radius: 10px;
            display: none;
        }
        
        .saved-scenarios.active {
            display: block;
        }
        
        .scenario-item {
            background-color: #1a3a6e;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        @media (max-width: 768px) {
            .selection-area {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .option-list {
                grid-template-columns: 1fr;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Hotwife Rollenspiel Generator üî•</h1>
        <div class="subtitle">Erweiterte Version mit expliziten Szenarien, Handlungen und Dialogen</div>
        
        <div class="warning">
            <strong>‚ö†Ô∏è EXPLIZITER INHALT ‚ö†Ô∏è</strong><br>
            Dieser Generator enth√§lt sehr explizite Sprache und erotische Inhalte. Nur f√ºr einvernehmliche Rollenspiele zwischen einwilligenden Erwachsenen in einer vertrauensvollen Beziehung. Alle Grenzen m√ºssen respektiert werden.
        </div>
        
        <div class="explicit-toggle">
            <label class="toggle-label">
                <input type="checkbox" id="explicitToggle">
                <span class="toggle-switch"></span>
                <span>Explizite Inhalte anzeigen</span>
            </label>
        </div>
        
        <div class="instructions">
            <h3>Anleitung:</h3>
            <p>1. W√§hle eine Kategorie (Filter durch Explizit-Toggle)</p>
            <p>2. W√§hle ein Szenario oder eine Handlung aus</p>
            <p>3. Folge dem Handlungsstrang oder kehre zur√ºck</p>
            <p>4. Nutze die "Gespeicherten Szenarien" f√ºr deine Favoriten</p>
            <p>5. Achte auf Safe Words und Grenzen im echten Rollenspiel!</p>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="totalScenarios">0</div>
                <div class="stat-label">Szenarien</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="explicitCount">0</div>
                <div class="stat-label">Explizite</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="selectedCount">0</div>
                <div class="stat-label">Ausgew√§hlt</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="savedCount">0</div>
                <div class="stat-label">Gespeichert</div>
            </div>
        </div>
        
        <div class="selection-area" id="categorySelection">
            <!-- Kategorien werden per JavaScript geladen -->
        </div>
        
        <div class="content-display" id="contentDisplay">
            <!-- Inhalte werden dynamisch geladen -->
        </div>
        
        <div class="navigation" id="navigation" style="display: none;">
            <button class="btn btn-back" id="backBtn">‚Üê Zur√ºck</button>
            <div>
                <button class="btn btn-explicit" id="saveBtn" style="display: none;">üíæ Speichern</button>
                <button class="btn btn-next" id="nextBtn" style="display: none; margin-left: 10px;">Weiter ‚Üí</button>
            </div>
        </div>
        
        <div class="saved-scenarios" id="savedScenarios">
            <h3 class="history-title">Gespeicherte Szenarien</h3>
            <div id="savedList"></div>
        </div>
        
        <div class="history">
            <div class="history-title">
                <span>Verlauf</span>
                <button class="btn" id="clearHistoryBtn" style="padding: 5px 10px; font-size: 0.8rem;">Verlauf l√∂schen</button>
            </div>
            <div id="historyList"></div>
        </div>
        
        <button class="reset-btn" id="resetBtn">üîÑ Neustart</button>
    </div>

    <script>
        // Erweiterte Datenstruktur f√ºr Rollenspiel-Optionen
        const roleplayData = {
            categories: [
                {
                    id: "explicit_commands",
                    title: "Explizite Befehle & Direktivit√§t",
                    description: "Sehr direkte, grafische Befehle und Anweisungen mit expliziter Sprache",
                    difficulty: "explicit",
                    icon: "üî•",
                    explicit: true,
                    content: [
                        {
                            id: "explicit1",
                            text: "‚ÄûKomm her und schau mir zu, wie ich meiner Fotze zeige, wie sehr sie einen echten Schwanz braucht. Du darfst nur zuschauen und deine Hand an deinen eigenen Schwanz legen.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûSiehst du, wie nass ich bin? Das ist nicht f√ºr dich. Das ist f√ºr den Gedanken an einen anderen Schwanz in mir. Willst du sehen, wie ich mir vorstelle, dass er mich fickt?‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch spreize meine Fotze f√ºr dich. Siehst du, wie sie pulsert? Stell dir vor, es w√§re ein fremder Schwanz, der sie ausweitet. Beschreibe mir, was du sehen w√ºrdest.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        },
                                        {
                                            text: "‚ÄûIch f√ºhre zwei Finger in mich ein. Z√§hl laut mit, wie viele er schaffen w√ºrde. Du w√ºrdest es nie schaffen, so tief zu gehen wie er.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch werde jetzt meinen Vibrator nehmen, aber ich nenne ihn bei seinem Namen. Das ist 'Mark' und er fickt mich besser als du es jemals k√∂nntest.‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûH√∂rst du das Summen? Das ist der Sound davon, wie Mark meine Fotze zum Kommen bringt. Du darfst nicht kommen, bevor ich es tue. Dein Schwanz wartet auf meine Erlaubnis.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "explicit2",
                            text: "‚ÄûDu stehst jetzt auf der anderen Seite der T√ºr und h√∂rst zu, wie ich telefoniere. Ich beschreibe einem anderen Mann genau, was ich mit meiner Zunge und meinem Mund mit seinem Schwanz machen w√ºrde.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch erz√§hle ihm, wie ich seinen Schwanz tief in meinen Hals nehme, w√§hrend ich an deine kleinen Versuche denke. Ich lache und sage ihm, dass du niemals so tief gehen k√∂nntest.‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch frage ihn, ob er will, dass ich schlucke. Ich sage ihm, dass ich alles von ihm will, w√§hrend du drau√üen stehst und deinen kleinen Schwanz in der Hand h√§ltst.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch lege jetzt auf und komme zur T√ºr. Ich √∂ffne sie und du siehst meine nassen Lippen. 'Das war nur ein Vorgeschmack', sage ich. 'Er kommt n√§chste Woche vorbei, um es wirklich zu tun.'‚Äú",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        },
                        {
                            id: "explicit3",
                            text: "‚ÄûIch werde dir jetzt Bilder zeigen, die ich f√ºr jemand anderen gemacht habe. Bilder von meiner Fotze, meinem Arsch, meinen Lippen um einen imagin√§ren Schwanz. Und du wirst mir sagen, welches ihm am besten gefallen w√ºrde.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûDieses Bild zeigt meine nasse Fotze, bereit f√ºr einen echten Mann. Siehst du den Unterschied zu wenn sie f√ºr dich nass ist? F√ºr ihn ist sie √ºberschwemmter, hungriger.‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûJetzt mache ich ein neues Bild, w√§hrend du zusiehst. Ich spreize meine Fotze weit und denke an seinen dicken Schwanz. Sag 'Klick' wenn es perfekt ist f√ºr ihn.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch schicke das Bild jetzt an ihn, w√§hrend du daneben sitzt. Ich schreibe dazu: 'Das wartet auf dich, w√§hrend mein Mann zuschaut.' Willst du sehen, was er antwortet?'",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "humiliation_scenes",
                    title: "Dem√ºtigungs-Szenarien",
                    description: "Szenarien mit verbaler und psychologischer Dem√ºtigungselementen",
                    difficulty: "hard",
                    icon: "üéØ",
                    explicit: true,
                    content: [
                        {
                            id: "humiliation1",
                            text: "‚ÄûDu kniet jetzt nackt vor mir, w√§hrend ich einen meiner St√∂ckelabs√§tze in der Hand halte. Ich erz√§hle dir, wie mein neuer Liebhaber mich gestern gefickt hat, und du vergleichst seinen Schwanz mit diesem Absatz.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch halte den Absatz neben deinen Schwanz. 'Siehst du den Unterschied?' frage ich. 'Seiner ist so viel dicker, h√§rter. Er f√ºllt meine Fotze aus, wo du nur darin herumstocherst.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûJetzt lecke meinen Absatz sauber. So sauber wie ich seinen Schwanz geleckt habe. Und denk daran, dass sein Schwanz besser geschmeckt hat als dieser Lederabsatz.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch lasse den Absatz auf deinen Schwanz fallen. 'Das ist das Gewicht seiner Eier auf deinem winzigen Schwanz', erkl√§re ich. 'Kannst du es √ºberhaupt sp√ºren?'‚Äú",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        },
                        {
                            id: "humiliation2",
                            text: "‚ÄûIch habe heute einen neuen Slip gekauft. Er ist aus Spitze und viel zu teuer f√ºr dich. Ich trage ihn jetzt f√ºr mein Date morgen. Du darfst ihn nur ansehen, nicht anfassen. Er ist f√ºr bessere M√§nner gemacht.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch zeige dir, wie der Slip an mir sitzt. 'Siehst du, wie er meine Fotze umschmeichelt?' frage ich. 'Deine kleinen Finger k√∂nnten niemals so sanft sein. Nur ein richtiger Schwanz verdient, ihn zur Seite zu schieben.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûJetzt ziehe ich ihn aus und halte ihn dir hin. 'Riech daran. Das ist der Geruch meiner Erregung f√ºr jemand anderen. Atme tief ein und merk dir diesen Geruch. Es ist der Geruch deiner Unzul√§nglichkeit.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch falte den Slip und lege ihn in meine Handtasche. 'Er wird morgen nass sein, wenn ich zur√ºckkomme', verspreche ich. 'Vielleicht lasse ich dich dann daran riechen, wenn er noch nach ihm und mir riecht.'‚Äú",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        },
                        {
                            id: "humiliation3",
                            text: "‚ÄûDu wirst jetzt mein Schminktischchen sein. Ich stelle meine F√º√üe auf deinen R√ºcken, w√§hrend ich mich f√ºr mein Date schminke. Jedes Mal wenn ich einen Lippenstift auftrage, erz√§hle ich dir, was ich mit diesen Lippen bei ihm machen werde.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûMit diesem Rot werde ich seinen Schwanz ummalen. Mit diesem Glanz werde ich ihn einreiben, bevor ich ihn in den Mund nehme. Siehst du, wie sorgf√§ltig ich mich vorbereite? F√ºr dich habe ich mich nie so viel M√ºhe gegeben.‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûJetzt mache ich meine Lippen perfekt f√ºr ihn. 'Pucker up', sage ich zu dir, w√§hrend ich in den Spiegel schaue. 'So werde ich sie um seinen Schwanz formen. Viel enger als um deinen.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch stehe auf und trete dich leicht mit dem Absatz. 'Bleib liegen', befehle ich. 'Ich gehe jetzt. Wenn ich zur√ºckkomme, erz√§hle ich dir jeden einzelnen Kuss, jeden Leck, jeden Fick. Und du wirst mir dankbar sein, dass du √ºberhaupt zuh√∂ren darfst.'‚Äú",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "public_scenarios",
                    title: "√ñffentliche Dem√ºtigungen",
                    description: "Szenarien mit √∂ffentlichen oder semi-√∂ffentlichen Elementen",
                    difficulty: "explicit",
                    icon: "üåÜ",
                    explicit: true,
                    content: [
                        {
                            id: "public1",
                            text: "‚ÄûWir gehen in eine Bar. Du sitzt am Ende der Theke, w√§hrend ich in der Mitte flirtet. Jedes Mal wenn ich einen Mann zum Lachen bringe, schicke ich dir ein Getr√§nk mit der Nachricht 'Danke, dass du mich bessereren M√§nnern √ºberl√§sst'.‚Äú",
                            explicit: false,
                            followUps: [
                                {
                                    text: "‚ÄûEin Mann legt seine Hand auf meine H√ºfte. Ich lehne mich zur√ºck in seinen Arm und schaue zu dir r√ºber. Ich zwinkere dir zu, w√§hrend er mir etwas ins Ohr fl√ºstert, das mich zum Lachen bringt.‚Äú",
                                    explicit: false,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch stehe auf und gehe mit ihm zur Tanzfl√§che. Wir tanzen eng, seine H√§nde auf meinem Arsch. Ich schaue √ºber seine Schulter direkt in deine Augen, w√§hrend ich mich an ihn presse.‚Äú",
                                            explicit: false,
                                            isEnd: true
                                        }
                                    ]
                                },
                                {
                                    text: "‚ÄûIch komme zu dir zur√ºck und fl√ºstere: 'Er hat mich gefragt, ob ich mit ihm auf die Toilette kommen will. Soll ich?' Dein Gesicht sagt alles. Ich k√ºsse deine Wange und sage: 'Gut so. Ich gehe jetzt.'‚Äú",
                                    explicit: true,
                                    isEnd: true
                                }
                            ]
                        },
                        {
                            id: "public2",
                            text: "‚ÄûIm Restaurant bestelle ich f√ºr dich ein Kinder-Men√º. F√ºr mich das teuerste Steak. Ich erkl√§re dem Kellner: 'Mein Mann hat einen kleinen Appetit. Ich brauche mehr Energie f√ºr sp√§ter.' und zwinkere ihm zu.‚Äú",
                            explicit: false,
                            followUps: [
                                {
                                    text: "‚ÄûW√§hrend wir essen, schreibe ich unter dem Tisch eine Nachricht. Ich zeige dir den Bildschirm: 'Hey, ich denke an deinen Schwanz, w√§hrend ich mit meinem Mann esse. Er bestellt wie ein Kind.' Dann schicke ich sie ab.‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûMein Telefon vibriert. Ich lese die Antwort laut vor: 'Arme Kerl. Ich f√ºlle dich sp√§ter aus, Baby.' Ich seufze laut und sage: 'Ich kann kaum warten.' w√§hrend ich dich ansche.‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "cuckold_preparation",
                    title: "Vorbereitung & Rituale",
                    description: "Rituelle Handlungen vor, w√§hrend oder nach dem Cuckolding",
                    difficulty: "medium",
                    icon: "‚öôÔ∏è",
                    explicit: false,
                    content: [
                        {
                            id: "prep1",
                            text: "‚ÄûBevor mein Date kommt, rasierst du mich. Jeden Zentimeter meiner Fotze und meines Arschs. Du machst mich perfekt f√ºr einen anderen Mann. Und w√§hrend du arbeitest, erz√§hle ich dir, was er mit diesen Bereichen machen wird.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûSei vorsichtig hier', warne ich, w√§hrend du meinen Arschl√∂ffel rasiert. 'Hier wird sein Schwanz sp√§ter hin wollen. Er mag es eng. Viel enger als du es jemals ertragen k√∂nntest.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch stehe auf und betrachte deine Arbeit im Spiegel. 'Perfekt', lobe ich. 'Jetzt ist sie bereit f√ºr einen echten Mann. Danke, dass du mich f√ºr ihn vorbereitet hast. Jetzt geh und bereite das Schlafzimmer vor. Und leg Handt√ºcher bereit - er schwitzt viel.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "prep2",
                            text: "‚ÄûDu bereitest mein 'Date-Outfit' vor. Leg jedes Kleidungsst√ºck aufs Bett. Ich werde sie anprobieren und du bewertest jedes: 'Zu pr√ºde', 'Nicht sexy genug', 'Das l√§sst zu viel zu seiner Fantasie √ºber'. Bis ich das perfekte finde.‚Äú",
                            explicit: false,
                            followUps: [
                                {
                                    text: "‚ÄûDieses Kleid', sage ich und halte ein kurzes schwarzes Kleid hoch. 'Es √∂ffnet sich leicht. Er wird leicht drankommen. Was denkst du? Soll ich es tragen, damit er schnell in meine Fotze kommt?'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch ziehe es an und drehe mich vor dir. 'Siehst du? Kein Slip. Ich gehe immer ohne zu ihm. Er mag den direkten Zugang. Deine Aufgabe ist es, das Kleid morgen in die Reinigung zu bringen, wenn es nach ihm riecht.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "reclaiming_scenes",
                    title: "Reclaiming & Nachspiel",
                    description: "Szenarien nach dem Cuckolding-Ereignis",
                    difficulty: "hard",
                    icon: "‚Ü©Ô∏è",
                    explicit: true,
                    content: [
                        {
                            id: "reclaim1",
                            text: "‚ÄûIch komme zur√ºck und du riechst ihn sofort an mir. Meine Haut, mein Atem, meine Fotze - alles riecht nach ihm. Ich setze mich breitbeinig vor dich. 'Riech', befehle ich. 'Riech was ein richtiger Mann mit mir macht.'‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch ziehe meine Unterw√§sche aus und halte sie dir unter die Nase. 'Das ist sein Sperma vermischt mit meiner Feuchtigkeit', erkl√§re ich. 'Das ist der Geruch davon, wie eine echte Frau gefickt wird. Willst du es schmecken?'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûIch schiebe den feuchten Slip in deinen Mund. 'Leck ihn sauber. Leck den Beweis davon, dass ich heute Nacht eine richtige Frau war. Und wenn du fertig bist, darfst du mich vielleicht k√ºssen, bevor ich dusche.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "reclaim2",
                            text: "‚ÄûEr hat mich so heftig gefickt, dass ich immer noch sp√ºre, wie er in mir war. Komm her und f√ºhle, wie weit offen meine Fotze noch ist. Deine Finger verschwinden darin, wo sein dicker Schwanz gerade war.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch f√ºhre deine Hand zu meiner Fotze. 'F√ºhlst du es?' fl√ºstere ich. 'F√ºhlst du, wie ausgedehnt ich bin? Wie locker f√ºr dich jetzt? Du rutschst einfach rein, wo er sich reingequetscht hat.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûJetzt fick mich. Fick die Fotze, die er gerade benutzt hat. Aber sei schnell - ich bin schon von ihm gekommen. Das hier ist nur deine Belohnung daf√ºr, dass du mich zu ihm geschickt hast.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "verbal_humiliation",
                    title: "Verbale Dem√ºtigung",
                    description: "Reine verbale Dem√ºtigung und Vergleiche",
                    difficulty: "medium",
                    icon: "üó£Ô∏è",
                    explicit: true,
                    content: [
                        {
                            id: "verbal1",
                            text: "‚ÄûLass uns √ºber Gr√∂√üe sprechen. Nicht von Pers√∂nlichkeit oder Gef√ºhlen. Nur Schwanzgr√∂√üe. Seiner ist so lang wie mein Unterarm und so dick wie mein Handgelenk. Beschreibe mir deinen im Vergleich.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûIch lache h√∂hnisch. 'Das dachte ich mir', sage ich. 'Wei√üt du, was das Beste ist? Dass ich √ºberhaupt keinen Vergleich brauche. Ich f√ºhle den Unterschied. Meine Fotze f√ºhlt den Unterschied. Sie schreit nach ihm und g√§hnt bei dir.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûKomm her und zeig mir deinen kleinen Schwanz. Ich halte meine Hand daneben. 'Siehst du?' spotte ich. 'Meine Hand ist gr√∂√üer. SEINE Eier sind gr√∂√üer. Alles an ihm ist mehr Mann als du.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "verbal2",
                            text: "‚ÄûIch werde dir jetzt erz√§hlen, wie er kommt. Nicht wie du - dieses kleine, pfeifende Ger√§usch und ein paar Tropfen. Er st√∂hnt wie ein Tier und f√ºllt mich. Ich f√ºhle es in mir kochen. Das ist, wie ein Mann kommt.‚Äú",
                            explicit: true,
                            followUps: [
                                {
                                    text: "‚ÄûUnd wei√üt du, was ich tue, wenn er kommt? Ich dr√ºcke meine Fotze um seinen Schwanz und sauge jeden Tropfen aus ihm heraus. Ich will alles. Bei dir lasse ich es einfach herauslaufen. Es ist nicht genug, um es zu behalten.'‚Äú",
                                    explicit: true,
                                    followUps: [
                                        {
                                            text: "‚ÄûManchmal, wenn er besonders viel kommt, l√§uft es mir die Beine runter. Das lasse ich dann f√ºr dich. Du darfst es auflecken. Das ist das Einzige von ihm, was du in deinem Leben schmecken wirst.'‚Äú",
                                            explicit: true,
                                            isEnd: true
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        };

        // App State
        let currentState = {
            selectedCategory: null,
            selectedOption: null,
            selectedFollowUp: null,
            history: [],
            savedScenarios: [],
            showExplicit: false,
            stats: {
                totalSelections: 0,
                explicitSelections: 0
            }
        };

        // DOM Elemente
        const categorySelectionEl = document.getElementById('categorySelection');
        const contentDisplayEl = document.getElementById('contentDisplay');
        const navigationEl = document.getElementById('navigation');
        const backBtn = document.getElementById('backBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resetBtn = document.getElementById('resetBtn');
        const saveBtn = document.getElementById('saveBtn');
        const historyListEl = document.getElementById('historyList');
        const savedScenariosEl = document.getElementById('savedScenarios');
        const savedListEl = document.getElementById('savedList');
        const explicitToggle = document.getElementById('explicitToggle');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const totalScenariosEl = document.getElementById('totalScenarios');
        const explicitCountEl = document.getElementById('explicitCount');
        const selectedCountEl = document.getElementById('selectedCount');
        const savedCountEl = document.getElementById('savedCount');

        // Kategorien anzeigen
        function displayCategories() {
            categorySelectionEl.innerHTML = '';
            
            roleplayData.categories.forEach(category => {
                // Filtere nach expliziten Inhalten wenn n√∂tig
                if (!currentState.showExplicit && category.explicit) {
                    return;
                }
                
                const card = document.createElement('div');
                card.className = `category-card ${currentState.selectedCategory?.id === category.id ? 'selected' : ''}`;
                card.innerHTML = `
                    <div class="category-title">
                        ${category.icon} ${category.title}
                        <span class="difficulty ${category.difficulty}">${getDifficultyText(category.difficulty)}</span>
                        ${category.explicit ? '<span class="difficulty explicit">EXPLIZIT</span>' : ''}
                    </div>
                    <div class="category-description">${category.description}</div>
                `;
                
                card.addEventListener('click', () => {
                    selectCategory(category);
                });
                
                categorySelectionEl.appendChild(card);
            });
            
            updateStats();
        }

        function getDifficultyText(difficulty) {
            switch(difficulty) {
                case 'easy': return 'Einfach';
                case 'medium': return 'Mittel';
                case 'hard': return 'Schwierig';
                case 'explicit': return 'Explizit';
                default: return '';
            }
        }

        // Kategorie ausw√§hlen
        function selectCategory(category) {
            currentState.selectedCategory = category;
            currentState.selectedOption = null;
            currentState.selectedFollowUp = null;
            
            displayCategories();
            displayCategoryContent(category);
            addToHistory(`Kategorie: ${category.title}`, category.icon);
            
            navigationEl.style.display = 'flex';
            nextBtn.style.display = 'none';
            saveBtn.style.display = 'none';
            savedScenariosEl.classList.remove('active');
        }

        // Kategorie-Inhalt anzeigen
        function displayCategoryContent(category) {
            contentDisplayEl.innerHTML = '';
            contentDisplayEl.classList.add('active');
            
            const title = document.createElement('h2');
            title.className = 'content-title';
            title.innerHTML = `${category.icon} ${category.title} ${category.explicit ? '<span class="difficulty explicit">EXPLIZIT</span>' : ''}`;
            contentDisplayEl.appendChild(title);
            
            if (category.content.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'option-item';
                emptyMessage.innerHTML = `<div class="option-text">Keine Inhalte verf√ºgbar f√ºr diese Kategorie.</div>`;
                contentDisplayEl.appendChild(emptyMessage);
                return;
            }
            
            const list = document.createElement('ul');
            list.className = 'option-list';
            
            category.content.forEach(option => {
                const item = document.createElement('li');
                item.className = `option-item ${option.explicit ? 'explicit' : ''}`;
                
                const textDiv = document.createElement('div');
                textDiv.className = 'option-text';
                if (option.explicit) {
                    textDiv.innerHTML = `<span class="explicit-text">${option.text}</span>`;
                } else {
                    textDiv.textContent = option.text;
                }
                
                item.appendChild(textDiv);
                
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'option-actions';
                
                const selectBtn = document.createElement('button');
                selectBtn.className = `btn ${option.explicit ? 'btn-explicit' : 'btn-select'}`;
                selectBtn.innerHTML = option.explicit ? 'üî• Diese Option w√§hlen' : 'Diese Option w√§hlen';
                selectBtn.dataset.id = option.id;
                
                selectBtn.addEventListener('click', () => {
                    selectOption(option);
                });
                
                actionsDiv.appendChild(selectBtn);
                item.appendChild(actionsDiv);
                list.appendChild(item);
            });
            
            contentDisplayEl.appendChild(list);
        }

        // Option ausw√§hlen
        function selectOption(option) {
            currentState.selectedOption = option;
            currentState.stats.totalSelections++;
            if (option.explicit) {
                currentState.stats.explicitSelections++;
            }
            
            displayOptionFollowUps(option);
            addToHistory(`Option: ${option.text.substring(0, 60)}...`, 'üí¨');
            
            nextBtn.style.display = option.followUps && option.followUps.length > 0 ? 'inline-block' : 'none';
            saveBtn.style.display = 'inline-block';
            
            updateStats();
        }

        // Folgoptionen anzeigen
        function displayOptionFollowUps(option) {
            contentDisplayEl.innerHTML = '';
            
            const title = document.createElement('h2');
            title.className = 'content-title';
            title.innerHTML = `${currentState.selectedCategory.icon} Ausgew√§hlte Option ${option.explicit ? '<span class="difficulty explicit">EXPLIZIT</span>' : ''}`;
            contentDisplayEl.appendChild(title);
            
            const selectedOption = document.createElement('div');
            selectedOption.className = `option-item ${option.explicit ? 'explicit' : ''}`;
            
            const textDiv = document.createElement('div');
            textDiv.className = 'option-text';
            if (option.explicit) {
                textDiv.innerHTML = `<span class="explicit-text">${option.text}</span>`;
            } else {
                textDiv.textContent = option.text;
            }
            
            selectedOption.appendChild(textDiv);
            contentDisplayEl.appendChild(selectedOption);
            
            if (option.followUps && option.followUps.length > 0) {
                const followUpTitle = document.createElement('h3');
                followUpTitle.className = 'content-title';
                followUpTitle.textContent = 'W√§hle einen Handlungsstrang:';
                followUpTitle.style.fontSize = '1.2rem';
                followUpTitle.style.marginTop = '20px';
                contentDisplayEl.appendChild(followUpTitle);
                
                const list = document.createElement('ul');
                list.className = 'option-list';
                
                option.followUps.forEach((followUp, index) => {
                    const item = document.createElement('li');
                    item.className = `option-item ${followUp.explicit ? 'explicit' : ''}`;
                    
                    const textDiv = document.createElement('div');
                    textDiv.className = 'option-text';
                    if (followUp.explicit) {
                        textDiv.innerHTML = `<span class="explicit-text">${followUp.text}</span>`;
                    } else {
                        textDiv.textContent = followUp.text;
                    }
                    
                    item.appendChild(textDiv);
                    
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'option-actions';
                    
                    const selectBtn = document.createElement('button');
                    selectBtn.className = `btn ${followUp.explicit ? 'btn-explicit' : 'btn-select'}`;
                    selectBtn.textContent = 'Diesen Weg w√§hlen';
                    selectBtn.dataset.index = index;
                    
                    selectBtn.addEventListener('click', () => {
                        selectFollowUp(followUp, index);
                    });
                    
                    actionsDiv.appendChild(selectBtn);
                    item.appendChild(actionsDiv);
                    list.appendChild(item);
                });
                
                contentDisplayEl.appendChild(list);
            } else {
                displayEndOfPath(option);
            }
        }

        // Folgoption ausw√§hlen
        function selectFollowUp(followUp, index) {
            currentState.selectedFollowUp = { followUp, index };
            currentState.stats.totalSelections++;
            if (followUp.explicit) {
                currentState.stats.explicitSelections++;
            }
            
            if (followUp.isEnd) {
                displayEndOfPath(followUp);
                addToHistory(`Handlung: ${followUp.text.substring(0, 60)}... [ENDE]`, 'üèÅ');
            } else if (followUp.followUps && followUp.followUps.length > 0) {
                displayOptionFollowUps(followUp);
                addToHistory(`Handlung: ${followUp.text.substring(0, 60)}...`, '‚Üí');
            }
            
            nextBtn.style.display = followUp.followUps && followUp.followUps.length > 0 ? 'inline-block' : 'none';
            saveBtn.style.display = 'inline-block';
            
            updateStats();
        }

        // Ende eines Handlungsstrangs anzeigen
        function displayEndOfPath(item) {
            contentDisplayEl.innerHTML = '';
            
            const title = document.createElement('h2');
            title.className = 'content-title';
            title.innerHTML = `üé¨ Ende des Handlungsstrangs ${item.explicit ? '<span class="difficulty explicit">EXPLIZIT</span>' : ''}`;
            contentDisplayEl.appendChild(title);
            
            const selectedOption = document.createElement('div');
            selectedOption.className = `option-item ${item.explicit ? 'explicit' : ''}`;
            
            const textDiv = document.createElement('div');
            textDiv.className = 'option-text';
            if (item.explicit) {
                textDiv.innerHTML = `<span class="explicit-text">${item.text}</span>`;
            } else {
                textDiv.textContent = item.text;
            }
            
            selectedOption.appendChild(textDiv);
            contentDisplayEl.appendChild(selectedOption);
            
            const endMessage = document.createElement('div');
            endMessage.className = 'option-item';
            endMessage.innerHTML = `
                <div class="option-text" style="text-align: center; padding: 30px;">
                    <strong>‚ú® Dieser Handlungsstrang endet hier. ‚ú®</strong><br><br>
                    <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
                        <div>Du k√∂nntest nun:</div>
                        <div>1. Zur√ºck zur vorherigen Entscheidung gehen</div>
                        <div>2. Eine neue Kategorie ausw√§hlen</div>
                        <div>3. Das Rollenspiel basierend auf diesem Ende weiterf√ºhren</div>
                        <div>4. Dieses Szenario speichern f√ºr sp√§ter</div>
                    </div>
                </div>
            `;
            contentDisplayEl.appendChild(endMessage);
        }

        // Szenario speichern
        function saveScenario() {
            if (!currentState.selectedOption) return;
            
            const scenario = {
                id: Date.now(),
                category: currentState.selectedCategory?.title || 'Unbekannt',
                option: currentState.selectedOption.text,
                followUp: currentState.selectedFollowUp?.followUp?.text || null,
                timestamp: new Date().toLocaleString(),
                explicit: currentState.selectedOption.explicit || (currentState.selectedFollowUp?.followUp?.explicit || false)
            };
            
            currentState.savedScenarios.push(scenario);
            updateSavedScenarios();
            addToHistory('Szenario gespeichert', 'üíæ');
            
            // Kurze Best√§tigung anzeigen
            const saveBtn = document.getElementById('saveBtn');
            const originalText = saveBtn.innerHTML;
            saveBtn.innerHTML = '‚úÖ Gespeichert!';
            saveBtn.style.backgroundColor = '#2e7d32';
            
            setTimeout(() => {
                saveBtn.innerHTML = originalText;
                saveBtn.style.backgroundColor = '';
            }, 1500);
        }

        // Gespeicherte Szenarien aktualisieren
        function updateSavedScenarios() {
            savedListEl.innerHTML = '';
            
            if (currentState.savedScenarios.length === 0) {
                savedListEl.innerHTML = '<div class="scenario-item">Noch keine Szenarien gespeichert.</div>';
                savedScenariosEl.classList.remove('active');
                return;
            }
            
            savedScenariosEl.classList.add('active');
            
            // Zeige die gespeicherten Szenarien (neueste zuerst)
            const reversedScenarios = [...currentState.savedScenarios].reverse();
            
            reversedScenarios.forEach((scenario, index) => {
                const item = document.createElement('div');
                item.className = `scenario-item ${scenario.explicit ? 'explicit' : ''}`;
                
                const content = document.createElement('div');
                content.style.flexGrow = '1';
                content.innerHTML = `
                    <div><strong>${scenario.category}</strong></div>
                    <div style="font-size: 0.9rem; margin-top: 5px; color: #b8c1ec;">${scenario.option.substring(0, 80)}${scenario.option.length > 80 ? '...' : ''}</div>
                    <div style="font-size: 0.8rem; margin-top: 5px; color: #8d99ae;">${scenario.timestamp}</div>
                `;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn';
                deleteBtn.style.padding = '5px 10px';
                deleteBtn.style.fontSize = '0.8rem';
                deleteBtn.style.backgroundColor = '#c62828';
                deleteBtn.textContent = 'L√∂schen';
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    deleteSavedScenario(scenario.id);
                });
                
                item.appendChild(content);
                item.appendChild(deleteBtn);
                item.addEventListener('click', () => {
                    loadSavedScenario(scenario);
                });
                
                savedListEl.appendChild(item);
            });
            
            updateStats();
        }

        // Gespeichertes Szenario laden
        function loadSavedScenario(scenario) {
            // Finde die Kategorie
            const category = roleplayData.categories.find(cat => cat.title === scenario.category);
            if (category) {
                selectCategory(category);
                // Hier k√∂nnten wir versuchen, den genauen Pfad wiederherzustellen
                // F√ºr jetzt zeigen wir einfach die Kategorie an
                addToHistory(`Geladen: ${scenario.category}`, 'üìÇ');
            }
        }

        // Gespeichertes Szenario l√∂schen
        function deleteSavedScenario(id) {
            currentState.savedScenarios = currentState.savedScenarios.filter(s => s.id !== id);
            updateSavedScenarios();
            addToHistory('Szenario gel√∂scht', 'üóëÔ∏è');
        }

        // Zur√ºck-Button Funktion
        function goBack() {
            if (currentState.selectedFollowUp) {
                // Zur√ºck zur Option
                currentState.selectedFollowUp = null;
                displayOptionFollowUps(currentState.selectedOption);
                addToHistory(`‚Üê Zur√ºck`, '‚Ü©Ô∏è');
            } else if (currentState.selectedOption) {
                // Zur√ºck zur Kategorie
                currentState.selectedOption = null;
                displayCategoryContent(currentState.selectedCategory);
                addToHistory(`‚Üê Zur√ºck zur Kategorie`, '‚Ü©Ô∏è');
            } else if (currentState.selectedCategory) {
                // Zur√ºck zur Kategorieauswahl
                currentState.selectedCategory = null;
                contentDisplayEl.classList.remove('active');
                navigationEl.style.display = 'none';
                saveBtn.style.display = 'none';
                displayCategories();
                addToHistory(`‚Üê Zur√ºck zur √úbersicht`, '‚Ü©Ô∏è');
            }
            
            nextBtn.style.display = 'none';
        }

        // Weiter-Button Funktion (n√§chste Folgoption)
        function goNext() {
            if (currentState.selectedFollowUp && currentState.selectedFollowUp.followUp.followUps) {
                // Zeige die n√§chsten Folgoptionen
                displayOptionFollowUps(currentState.selectedFollowUp.followUp);
            }
        }

        // Zur Geschichte hinzuf√ºgen
        function addToHistory(text, icon = 'üìù') {
            const timestamp = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            currentState.history.push({ text, timestamp, icon });
            updateHistoryDisplay();
            
            // Begrenze die History auf 50 Eintr√§ge
            if (currentState.history.length > 50) {
                currentState.history = currentState.history.slice(-50);
            }
        }

        // Geschichte aktualisieren
        function updateHistoryDisplay() {
            historyListEl.innerHTML = '';
            
            if (currentState.history.length === 0) {
                historyListEl.innerHTML = '<div class="history-item"><div class="history-text">Noch keine Auswahl getroffen.</div></div>';
                return;
            }
            
            // Zeige die Eintr√§ge (neueste zuerst)
            const reversedHistory = [...currentState.history].reverse();
            
            reversedHistory.forEach(entry => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <div class="history-text">${entry.icon} ${entry.text}</div>
                    <div class="history-time">${entry.timestamp}</div>
                `;
                historyListEl.appendChild(item);
            });
        }

        // Statistiken aktualisieren
        function updateStats() {
            // Z√§hle alle Szenarien
            let totalScenarios = 0;
            let explicitScenarios = 0;
            
            roleplayData.categories.forEach(category => {
                category.content.forEach(option => {
                    totalScenarios++;
                    if (option.explicit) explicitScenarios++;
                    
                    // Z√§hle auch FollowUps
                    if (option.followUps) {
                        option.followUps.forEach(followUp => {
                            totalScenarios++;
                            if (followUp.explicit) explicitScenarios++;
                            
                            if (followUp.followUps) {
                                followUp.followUps.forEach(followUp2 => {
                                    totalScenarios++;
                                    if (followUp2.explicit) explicitScenarios++;
                                });
                            }
                        });
                    }
                });
            });
            
            totalScenariosEl.textContent = totalScenarios;
            explicitCountEl.textContent = explicitScenarios;
            selectedCountEl.textContent = currentState.stats.totalSelections;
            savedCountEl.textContent = currentState.savedScenarios.length;
        }

        // Zur√ºcksetzen
        function resetApp() {
            currentState = {
                selectedCategory: null,
                selectedOption: null,
                selectedFollowUp: null,
                history: [],
                savedScenarios: currentState.savedScenarios, // Behalte gespeicherte Szenarien
                showExplicit: currentState.showExplicit, // Behalte den Explizit-Filter
                stats: {
                    totalSelections: 0,
                    explicitSelections: 0
                }
            };
            
            contentDisplayEl.classList.remove('active');
            navigationEl.style.display = 'none';
            saveBtn.style.display = 'none';
            savedScenariosEl.classList.remove('active');
            displayCategories();
            updateHistoryDisplay();
            updateStats();
            addToHistory("Rollenspiel Generator zur√ºckgesetzt", "üîÑ");
        }

        // Event Listener
        backBtn.addEventListener('click', goBack);
        nextBtn.addEventListener('click', goNext);
        resetBtn.addEventListener('click', resetApp);
        saveBtn.addEventListener('click', saveScenario);
        clearHistoryBtn.addEventListener('click', () => {
            currentState.history = [];
            updateHistoryDisplay();
            addToHistory("Verlauf gel√∂scht", "üóëÔ∏è");
        });

        // Explizit-Toggle
        explicitToggle.addEventListener('change', () => {
            currentState.showExplicit = explicitToggle.checked;
            displayCategories();
            
            if (currentState.selectedCategory && currentState.selectedCategory.explicit && !currentState.showExplicit) {
                // Wenn die aktuelle Kategorie explizit ist und wir sie ausblenden, zur√ºcksetzen
                currentState.selectedCategory = null;
                contentDisplayEl.classList.remove('active');
                navigationEl.style.display = 'none';
            }
            
            addToHistory(`Explizite Inhalte: ${currentState.showExplicit ? 'EIN' : 'AUS'}`, currentState.showExplicit ? 'üî•' : 'üëÅÔ∏è');
        });

        // Tastatur-Shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                goBack();
            } else if (e.key === 'ArrowRight' && nextBtn.style.display !== 'none') {
                goNext();
            } else if (e.key === 's' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                saveScenario();
            } else if (e.key === 'r' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                resetApp();
            }
        });

        // Initialisierung
        displayCategories();
        updateHistoryDisplay();
        updateStats();
        updateSavedScenarios();
        addToHistory("Hotwife Rollenspiel Generator gestartet", "üöÄ");

        // Info √ºber Tastaturk√ºrzel anzeigen
        setTimeout(() => {
            addToHistory("Tipp: Dr√ºcke ESC f√ºr zur√ºck, Pfeil rechts f√ºr weiter", "üí°");
        }, 2000);
    </script>
</body>
</html>